<html>
<head>
    <meta charset=utf-8 />
    <title>绘图示列</title>


    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            width: 100%;
        }

        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="canvas">
        您的浏览器版本目前不支持HTML5
    </canvas>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    <script type="text/javascript">

        $(function () {

            var canvas = document.getElementById("canvas");

            $(canvas).attr("width", $(window).get(0).innerWidth);
            $(canvas).attr("height", $(window).get(0).innerHeight);

            var i = 0,
                manifest = [
                    { src: 'img/farm-background.png', id: 'bg' },
                    { src: 'img/farm-warehouse-icon.png', id: 'icon-warehouse' },
                    { src: 'img/farm-seed-icon.png', id: 'icon-seed' }
                ];

            var loader = new createjs.LoadQueue();//采用标签形式加载
            loader.loadManifest(manifest);
            loader.addEventListener('fileload', function () {
                i++;
                console.log((i / (manifest.length).toFixed(2) + '%'));
            });
            loader.addEventListener('complete', handleComplete);

            //预加载完成
            function handleComplete() {
                console.log('load complete!');

                var stage, w, h;
                stage = new createjs.Stage(canvas);//实例化舞台
                createjs.Touch.enable(stage);//开启触摸
                createjs.Ticker.addEventListener('tick', stage);//监听舞台并更新舞台
                w = stage.canvas.width;
                h = stage.canvas.height;

                var bg = new createjs.Bitmap(loader.getResult('bg'));
                stage.addChild(bg.setTransform(0, 0, w / bg.image.width, h / bg.image.height));

                var icon_warehouse = new createjs.Bitmap(loader.getResult('icon-warehouse'));
                icon_warehouse.shadow = new createjs.Shadow("yellow", -1, -1, 30);

                icon_warehouse.addEventListener("click", function () {
                    alert('仓库功能暂未开放')
                });


                //icon_warehouse.shadow.color = '#FFFFF0';
                //var tween = createjs.Tween.get(icon_warehouse.shadow, { loop: true }).to({ color: '#FFFF00' }, 600).to({ color: '#FFFFF0' }, 600).call(function () {
                //    //icon_warehouse.shadow.color = '#7CFC00';
                //    console.log(icon_warehouse.shadow.color);
                //});
                
                stage.addChild(icon_warehouse.setTransform(w - w / 6, h - h / 3, w / bg.image.width, h / bg.image.height));

                createjs.Tween.get(icon_warehouse, { loop: true }).to({ x: icon_warehouse.x + 5 }, 1000).to({ x: icon_warehouse.x }, 800).call(function () {
                    console.log(1);
                });

                var icon_seed = new createjs.Bitmap(loader.getResult('icon-seed'));
                icon_seed.shadow = new createjs.Shadow("yellow", -1, -1, 30);
                icon_seed.addEventListener("click", function () {
                    alert('种子袋功能暂未开放')
                });

                stage.addChild(icon_seed.setTransform(w - w / 6, h - (h / 3) + icon_seed.image.height, w / bg.image.width, h / bg.image.height));

                createjs.Tween.get(icon_seed, { loop: true }).to({ x: icon_seed.x + 5 }, 1000).to({ x: icon_seed.x }, 800).call(function () {
                    console.log(1);
                });

                //stage.update()

                createjs.Ticker.setFPS(60);
                createjs.Ticker.addEventListener("tick", tick);

                function tick() {
                    stage.update();
                }
            }
        });
    </script>

</body>
</html>
