<html>
<head>
    <meta charset=utf-8 />
    <title>绘图示列</title>

    <script crossorigin src="/lib/fabric.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script crossorigin src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    <script type="text/javascript">

        $(function () {
            var canvas = $('#canvas');


            var bg = new Image();
            bg.src = "farm-background.png";

            // 图片加载完后，将其显示在canvas 上  
            bg.onload = function () {
                canvas = $('#canvas');
                canvas.attr("width", $(window).get(0).innerWidth)
                canvas.attr("height", $(window).get(0).innerHeight)
                var context = canvas.get(0).getContext("2d");
                context.drawImage(bg, 0, 0, canvas.width(), canvas.height());
                context.save()

                var icon_warehouse = {}
                icon_warehouse.image = new Image();
                icon_warehouse.image.src = "farm-warehouse-icon.png";
                icon_warehouse.x = canvas.width() - canvas.width() / 8
                icon_warehouse.y = canvas.height() - canvas.height() / 3
                icon_warehouse.image.onload = function () {
                    context.drawImage(icon_warehouse.image, icon_warehouse.x, icon_warehouse.y);
                    context.save()
                }

                var icon_seed = {}
                icon_seed.image = new Image();
                icon_seed.image.src = "farm-seed-icon.png";
                icon_seed.image.onclick = function () {
                    alert(1)
                }
                icon_seed.x = icon_warehouse.x
                icon_seed.y = (canvas.height() - canvas.height() / 3) + icon_seed.image.width * 0.8
                icon_seed.image.onload = function () {
                    context.drawImage(icon_seed.image, icon_seed.x, icon_seed.y);
                    context.save()
                }



                $(window).resize(function () {
                    canvas.attr("width", $(window).get(0).innerWidth)
                    canvas.attr("height", $(window).get(0).innerHeight)
                    context.drawImage(bg, 0, 0, canvas.width(), canvas.height());
                    context.save()

                });
            }

            

            //var canvas = new fabric.Canvas('canvas');

            fabric.Image.fromURL('farm-warehouse-icon.png', function (img) {

            //    //img.scale(0.5)

                canvas.add(img,0,0);
            });

        });
    </script>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            width: 100%;
        }

        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="canvas">
        您的浏览器版本目前不支持HTML5
    </canvas>
</body>
